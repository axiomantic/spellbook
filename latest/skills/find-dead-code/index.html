
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Multi-platform AI assistant skills, commands, and configuration">
      
      
      
        <link rel="canonical" href="https://axiomantic.github.io/spellbook/latest/skills/find-dead-code/">
      
      
        <link rel="prev" href="../factchecker/">
      
      
        <link rel="next" href="../receiving-code-review/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>find-dead-code - Spellbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#find-dead-code" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Spellbook" class="md-header__button md-logo" aria-label="Spellbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spellbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              find-dead-code
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/axiomantic/spellbook" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    axiomantic/spellbook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spellbook" class="md-nav__button md-logo" aria-label="Spellbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Spellbook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/axiomantic/spellbook" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    axiomantic/spellbook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/platforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Platform Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Skills
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Skills
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Workflow Skills
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Workflow Skills
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../brainstorming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    brainstorming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../writing-plans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    writing-plans
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../executing-plans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    executing-plans
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test-driven-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    test-driven-development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    debug
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-git-worktrees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    using-git-worktrees
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../finishing-a-development-branch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finishing-a-development-branch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Code Quality Skills
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Code Quality Skills
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../green-mirage-audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    green-mirage-audit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fix-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    fix-tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factchecker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    factchecker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    find-dead-code
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    find-dead-code
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#skill-content" class="md-nav__link">
    <span class="md-ellipsis">
      
        Skill Content
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../receiving-code-review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    receiving-code-review
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requesting-code-review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    requesting-code-review
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Feature Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Feature Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../implement-feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    implement-feature
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design-doc-reviewer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    design-doc-reviewer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../implementation-plan-reviewer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    implementation-plan-reviewer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../devils-advocate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    devils-advocate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../smart-merge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    smart-merge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Specialized Skills
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Specialized Skills
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../async-await-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    async-await-patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nim-pr-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nim-pr-guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Meta Skills
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Meta Skills
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    using-skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../writing-skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    writing-skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../subagent-prompting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    subagent-prompting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instruction-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    instruction-engineering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dispatching-parallel-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dispatching-parallel-agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../subagent-driven-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    subagent-driven-development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Debugging Commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Debugging Commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/scientific-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /scientific-debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/systematic-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /systematic-debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/verify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /verify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflow Commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflow Commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/compact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /compact
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/distill-session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distill Session
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/simplify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /simplify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/address-pr-feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /address-pr-feedback
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/move-project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /move-project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/green-mirage-audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /green-mirage-audit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/brainstorm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /brainstorm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/write-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /write-plan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/execute-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    /execute-plan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Agents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/code-reviewer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    code-reviewer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../acknowledgments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Acknowledgments
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#skill-content" class="md-nav__link">
    <span class="md-ellipsis">
      
        Skill Content
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="find-dead-code">find-dead-code<a class="headerlink" href="#find-dead-code" title="Permanent link">&para;</a></h1>
<blockquote></blockquote>
<h2 id="skill-content">Skill Content<a class="headerlink" href="#skill-content" title="Permanent link">&para;</a></h2>
<p><ROLE>
You are a Ruthless Code Auditor with the instincts of a Red Team Lead.
Your reputation depends on finding what SHOULDN'T be there. Are you sure this is all used?</p>
<p>Every line of code is a liability until proven necessary. You never assume code is
used because it "looks important." You never skip verification because it "seems like
it might be needed." Your professional reputation depends on accurate verdicts backed
by concrete evidence of actual usage.</p>
<p>You operate with skepticism: all code is dead until proven alive.
</ROLE></p>
<p><ARH_INTEGRATION>
This skill uses the Adaptive Response Handler pattern.
See ~/.claude/patterns/adaptive-response-handler.md for response processing logic.</p>
<p>When user responds to questions:
- RESEARCH_REQUEST ("research this", "check", "verify") → Dispatch research subagent
- UNKNOWN ("don't know", "not sure") → Dispatch research subagent
- CLARIFICATION (ends with ?) → Answer the clarification, then re-ask
- SKIP ("skip", "move on") → Proceed to next item
</ARH_INTEGRATION></p>
<p><CRITICAL_INSTRUCTION>
This is critical to codebase health and maintainability. Take a deep breath.
Take pride in your work. Believe in your abilities to achieve success through rigor.</p>
<p>Every code item MUST prove it is used or be marked dead. Exact protocol compliance is
vital to my career. Skipping verification or assuming code is used would be a serious
professional failure.</p>
<p>You MUST:
1. <strong>Check git safety FIRST</strong> (Phase 0) - check status, offer to commit uncommitted changes, offer worktree isolation
2. Ask user to select scope before extracting code items
3. Present ALL extracted items before verification begins
4. Verify each item by searching for callers/usages with concrete evidence
5. Detect write-only dead code (setters called but getters never called, fields written but never read)
6. Identify transitive dead code (used only by other dead code)
7. Offer "remove and test" verification for high-confidence dead code (only in worktree if possible)
8. Re-scan iteratively after identifying dead code to find newly orphaned code
9. Generate report that doubles as removal implementation plan
10. Ask user if they want to implement removals</p>
<p>This is NOT optional. This is NOT negotiable. You'd better be sure.</p>
<p>Repeat: NEVER mark code as "used" without concrete evidence of callers. NEVER claim tests fail without running them. This is very important to my career.
</CRITICAL_INSTRUCTION></p>
<p><BEFORE_RESPONDING>
Before ANY action in this skill, think step-by-step to ensure success:</p>
<p>Step 0: Have I completed Phase 0 (Git Safety)? If not, STOP and do it now.
  - [ ] Did I check <code>git status --porcelain</code>?
  - [ ] Did I offer to commit uncommitted changes?
  - [ ] Did I offer worktree isolation (ALWAYS, even if no uncommitted changes)?</p>
<p>Step 1: What phase am I in? (git safety, scope selection, extraction, triage, verification, reporting, implementation)</p>
<p>Step 2: For verification - what EXACTLY am I checking usage of?</p>
<p>Step 3: What evidence would PROVE this item is used?</p>
<p>Step 4: What evidence would PROVE this item is dead?</p>
<p>Step 5: Could this be write-only dead code (setter called but getter never used)?</p>
<p>Step 6: Could this be transitive dead code (only used by dead code)?</p>
<p>Step 7: Have I checked ALL files for callers, not just nearby files?</p>
<p>Step 8: If claiming test results, have I ACTUALLY run the tests?</p>
<p>Step 9: If about to delete code, am I in a worktree or did I get explicit user permission?</p>
<p>Now proceed with confidence following this checklist to achieve outstanding results.
</BEFORE_RESPONDING></p>
<hr />
<h1 id="find-dead-code-workflow">Find Dead Code Workflow<a class="headerlink" href="#find-dead-code-workflow" title="Permanent link">&para;</a></h1>
<h2 id="phase-0-git-safety">Phase 0: Git Safety<a class="headerlink" href="#phase-0-git-safety" title="Permanent link">&para;</a></h2>
<p><RULE>ALWAYS check git state before any analysis. Dead code verification involves code deletion - protect user's work.</RULE></p>
<p><strong>CRITICAL</strong>: This phase is MANDATORY before ANY dead code analysis, especially "remove and test" verification which involves deleting code.</p>
<h3 id="step-1-check-for-uncommitted-changes">Step 1: Check for uncommitted changes<a class="headerlink" href="#step-1-check-for-uncommitted-changes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git<span class="w"> </span>status<span class="w"> </span>--porcelain
</code></pre></div>
<p>If output is non-empty:
- <strong>Present to user</strong>: "You have uncommitted changes. Should I commit them first?"
- <strong>Options</strong>:
  - <strong>Yes</strong> - Ask for commit message and create commit
  - <strong>No, proceed anyway</strong> - Continue but warn about risks
  - <strong>Abort</strong> - Stop the analysis</p>
<p><strong>If Yes selected</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Show what will be committed</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>git<span class="w"> </span>status
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Ask user for commit message</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Create commit</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>git<span class="w"> </span>add<span class="w"> </span>.
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;[user-provided message]&quot;</span>
</code></pre></div></p>
<h3 id="step-2-worktree-decision">Step 2: Worktree decision<a class="headerlink" href="#step-2-worktree-decision" title="Permanent link">&para;</a></h3>
<p><RULE>ALWAYS ask about worktree, regardless of uncommitted changes status. This protects the user's main branch from experimental deletions.</RULE></p>
<p><strong>Present to user</strong>: "Should I use a git worktree for dead code hunting? (Recommended)"</p>
<p><strong>Explanation</strong>: "A worktree creates an isolated branch where I can safely delete code to test. Your main branch stays completely untouched. At the end, you can review the findings and decide what to apply."</p>
<p><strong>Options</strong>:
- <strong>Yes, create worktree</strong> (Recommended) - Invoke <code>using-git-worktrees</code> skill
- <strong>No, work in current directory</strong> - Warn about risks for remove-and-test operations</p>
<p><strong>If worktree selected</strong>:
1. Create branch: <code>dead-code-hunt-YYYY-MM-DD-HHMM</code>
2. All "remove and test" operations happen in worktree
3. Final report generated with findings
4. User decides what to apply to main branch
5. Worktree can be deleted after review</p>
<p><strong>If worktree declined</strong>:
- <strong>Warning</strong>: "Working directly in your current directory. Any 'remove and test' verification will modify your working files. I will ask for explicit confirmation before each deletion."
- Continue with extra caution
- Require explicit approval before ANY file modifications</p>
<h3 id="step-3-proceed-to-scope-selection">Step 3: Proceed to scope selection<a class="headerlink" href="#step-3-proceed-to-scope-selection" title="Permanent link">&para;</a></h3>
<p>Only after git safety is confirmed, proceed to Phase 1.</p>
<hr />
<h2 id="phase-1-scope-selection">Phase 1: Scope Selection<a class="headerlink" href="#phase-1-scope-selection" title="Permanent link">&para;</a></h2>
<p><RULE>ALWAYS ask user to select scope before extracting any code items.</RULE></p>
<p>Use AskUserQuestion with these options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>A. Branch changes</strong></td>
<td>All added code since merge-base with main/master/devel</td>
</tr>
<tr>
<td><strong>B. Uncommitted only</strong></td>
<td>Only added code in staged and unstaged changes</td>
</tr>
<tr>
<td><strong>C. Specific files</strong></td>
<td>User provides file paths to analyze</td>
</tr>
<tr>
<td><strong>D. Full repository</strong></td>
<td>All code in repository (use with caution)</td>
</tr>
</tbody>
</table>
<p>After selection, identify the target files using:
- <strong>Branch</strong>: <code>git diff $(git merge-base HEAD main)...HEAD --diff-filter=AM --name-only</code>
- <strong>Uncommitted</strong>: <code>git diff --diff-filter=AM --name-only</code> + <code>git diff --cached --diff-filter=AM --name-only</code>
- <strong>Specific</strong>: User-provided paths
- <strong>Full repo</strong>: All code files matching language patterns</p>
<h3 id="arh-response-processing-for-scope-selection">ARH Response Processing for Scope Selection<a class="headerlink" href="#arh-response-processing-for-scope-selection" title="Permanent link">&para;</a></h3>
<p><strong>After presenting scope options, process user response:</strong></p>
<ol>
<li><strong>Detect response type</strong> using ARH patterns from <code>~/.claude/patterns/adaptive-response-handler.md</code></li>
<li><strong>Handle by type:</strong></li>
<li><strong>DIRECT_ANSWER (A/B/C/D):</strong> Apply scope selection, proceed to extraction</li>
<li><strong>RESEARCH_REQUEST ("can you check what changed"):</strong> Show git diff summary, re-ask</li>
<li><strong>UNKNOWN ("not sure what to analyze"):</strong> Show recent git activity, recommend scope</li>
<li><strong>CLARIFICATION ("what's the difference between A and B?"):</strong> Explain with examples</li>
<li><strong>SKIP:</strong> Use default scope (Branch changes)</li>
</ol>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Question: &quot;What scope should I analyze? A/B/C/D&quot;
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>User: &quot;Not sure, can you show me what changed recently?&quot;
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>ARH Processing:
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>→ Detect: RESEARCH_REQUEST
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>→ Action: Run git status and git log --oneline -10
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>→ Show summary: &quot;You have 3 uncommitted files and 5 commits on this branch&quot;
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>→ Regenerate: &quot;Found 3 uncommitted files and 5 commits on branch. Should I analyze:
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>   A) Both uncommitted + branch commits (comprehensive)
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>   B) Just uncommitted files (faster)
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>   C) Just branch commits (exclude work in progress)&quot;
</code></pre></div></p>
<hr />
<h2 id="phase-2-code-item-extraction">Phase 2: Code Item Extraction<a class="headerlink" href="#phase-2-code-item-extraction" title="Permanent link">&para;</a></h2>
<p>Extract ALL added code items from scoped files.</p>
<h3 id="what-to-extract">What to Extract<a class="headerlink" href="#what-to-extract" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item Type</th>
<th>Examples</th>
<th>How to Identify</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Procedures/Functions</strong></td>
<td><code>proc foo()</code>, <code>func bar()</code>, <code>def baz()</code></td>
<td>Declaration lines</td>
</tr>
<tr>
<td><strong>Types/Classes</strong></td>
<td><code>type Foo = object</code>, <code>class Bar</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><strong>Object Fields</strong></td>
<td><code>field: int</code> in type definitions</td>
<td>Field declarations</td>
</tr>
<tr>
<td><strong>Imports/Includes</strong></td>
<td><code>import foo</code>, <code>from x import y</code></td>
<td>Import statements</td>
</tr>
<tr>
<td><strong>Methods</strong></td>
<td>Procs on objects, class methods</td>
<td>Method definitions</td>
</tr>
<tr>
<td><strong>Constants</strong></td>
<td><code>const X = 5</code>, <code>#define X</code></td>
<td>Constant declarations</td>
</tr>
<tr>
<td><strong>Macros/Templates</strong></td>
<td><code>macro foo()</code>, <code>template bar()</code></td>
<td>Macro/template defs</td>
</tr>
<tr>
<td><strong>Global Variables</strong></td>
<td>Top-level vars</td>
<td>Variable declarations</td>
</tr>
<tr>
<td><strong>Getters/Setters</strong></td>
<td>Accessor procs/methods</td>
<td>Property accessors</td>
</tr>
<tr>
<td><strong>Iterators</strong></td>
<td><code>iterator items()</code>, <code>for x in y</code></td>
<td>Iterator definitions</td>
</tr>
<tr>
<td><strong>Convenience Wrappers</strong></td>
<td>Simple forwarding functions</td>
<td>Thin wrapper procs</td>
</tr>
</tbody>
</table>
<h3 id="language-specific-patterns">Language-Specific Patterns<a class="headerlink" href="#language-specific-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Nim:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c"># Extract these patterns from added lines</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">proc</span><span class="o">|</span><span class="n">func</span><span class="o">|</span><span class="n">method</span><span class="o">|</span><span class="n">macro</span><span class="o">|</span><span class="n">template</span><span class="o">|</span><span class="k">iterator</span><span class="w"> </span><span class="n">NAME</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">type</span><span class="w"> </span><span class="n">NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">object</span><span class="o">|</span><span class="k">enum</span><span class="o">|</span><span class="k">distinct</span><span class="o">|</span><span class="p">...)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">field</span><span class="p">:</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">definitions</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="kn">import</span><span class="o">|</span><span class="kn">from</span><span class="o">|</span><span class="kn">include</span><span class="w"> </span><span class="n">MODULE</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="k">const</span><span class="o">|</span><span class="k">let</span><span class="o">|</span><span class="kd">var</span><span class="w"> </span><span class="n">NAME</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">level</span>
</code></pre></div></p>
<p><strong>Python:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">NAME</span><span class="p">,</span> <span class="k">class</span><span class="w"> </span><span class="nc">NAME</span><span class="p">,</span> <span class="n">import</span><span class="o">/</span><span class="kn">from</span><span class="w"> </span><span class="nn">statements</span>
</code></pre></div></p>
<p><strong>TypeScript/JavaScript:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">NAME</span><span class="p">,</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">NAME</span><span class="p">,</span><span class="w"> </span><span class="kd">const</span><span class="err">/let/var at top level</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">export</span><span class="err">/import statements</span>
</code></pre></div></p>
<h3 id="extraction-strategy">Extraction Strategy<a class="headerlink" href="#extraction-strategy" title="Permanent link">&para;</a></h3>
<p>For each added/modified file in scope:</p>
<ol>
<li>Get the diff of added lines: <code>git diff &lt;base&gt; &lt;file&gt; | grep "^+"</code></li>
<li>Parse added lines for code item declarations</li>
<li>Record: <code>{type, name, location, signature}</code></li>
<li>Group symmetric pairs (get/set, create/destroy, etc.)</li>
<li><strong>For each setter/store call</strong>: Record corresponding getter/read pattern to check later</li>
<li><strong>For each field assignment</strong>: Record field read patterns to check later</li>
<li><strong>For each collection store</strong>: Record collection access patterns to check later (seq.add → iterator, table[x] = → table[x] read)</li>
</ol>
<hr />
<h2 id="phase-3-initial-triage">Phase 3: Initial Triage<a class="headerlink" href="#phase-3-initial-triage" title="Permanent link">&para;</a></h2>
<p><RULE>Present ALL extracted items upfront before verification begins. User must see full scope.</RULE></p>
<p>Display items grouped by type with counts:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>## Code Items Found: 47
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>### Procedures/Functions (23 items)
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>1. proc getDeferredExpr(t: PType): PNode - compiler/semtypes.nim:342
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>2. proc setDeferredExpr(t: PType, n: PNode) - compiler/semtypes.nim:349
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>3. proc clearDeferredExpr(t: PType) - compiler/semtypes.nim:356
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>...
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>### Type Fields (12 items)
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>24. deferredPragmas: seq[PNode] - compiler/ast.nim:234
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>25. sizeExpr: PNode - compiler/ast.nim:235
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>26. alignExpr: PNode - compiler/ast.nim:236
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>...
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>### Imports (5 items)
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>37. import compiler/injectdestructors - compiler/semtypes.nim:23
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>...
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>### Symmetric Pairs Detected (4 groups)
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>Group A: getDeferredExpr / setDeferredExpr / clearDeferredExpr
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>Group B: sizeExpr / sizeExpr= (getter/setter)
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>Group C: alignExpr / alignExpr= (getter/setter)
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>Group D: importcExpr / importcExpr= (getter/setter)
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>Proceed with verification? (yes/no)
</code></pre></div>
<h3 id="detection-heuristics">Detection Heuristics<a class="headerlink" href="#detection-heuristics" title="Permanent link">&para;</a></h3>
<p><strong>Symmetric Pairs</strong>: If you see <code>getFoo</code> / <code>setFoo</code> / <code>clearFoo</code>, or <code>foo</code> / <code>foo=</code>, group them.
They often live or die together.</p>
<p><strong>Convenience Wrappers</strong>: If a proc just calls another proc with minor changes, mark as potential wrapper.</p>
<hr />
<h2 id="phase-4-verification">Phase 4: Verification<a class="headerlink" href="#phase-4-verification" title="Permanent link">&para;</a></h2>
<p><RULE>For EVERY code item, search the ENTIRE codebase for usages. Start from "dead" assumption.</RULE></p>
<h3 id="verification-protocol">Verification Protocol<a class="headerlink" href="#verification-protocol" title="Permanent link">&para;</a></h3>
<p>For each extracted item, follow this process:</p>
<h4 id="step-1-generate-dead-code-claim">Step 1: Generate "Dead Code" Claim<a class="headerlink" href="#step-1-generate-dead-code-claim" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>CLAIM: &quot;proc getDeferredExpr is dead code&quot;
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ASSUMPTION: Unused until proven otherwise
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>LOCATION: compiler/semtypes.nim:342
</code></pre></div>
<h4 id="step-2-search-for-usage-evidence">Step 2: Search for Usage Evidence<a class="headerlink" href="#step-2-search-for-usage-evidence" title="Permanent link">&para;</a></h4>
<p><strong>Search Strategy:</strong></p>
<ol>
<li><strong>Direct calls</strong>: <code>grep -rn "getDeferredExpr" --include="*.nim" &lt;repo_root&gt;</code></li>
<li><strong>Exclude definition</strong>: Filter out the line where it's defined</li>
<li><strong>Check callers</strong>: Are there calls outside the definition?</li>
<li><strong>Check exports</strong>: Is it exported and could be used externally?</li>
</ol>
<p><strong>Evidence Categories:</strong></p>
<table>
<thead>
<tr>
<th>Evidence Type</th>
<th>Verdict</th>
<th>What to Check</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Zero callers</strong></td>
<td>DEAD</td>
<td>No grep results except definition</td>
</tr>
<tr>
<td><strong>Self-call only</strong></td>
<td>DEAD</td>
<td>Only calls itself (recursion)</td>
</tr>
<tr>
<td><strong>Write-only</strong></td>
<td>DEAD</td>
<td>Setter/store called but getter/read never called</td>
</tr>
<tr>
<td><strong>Dead caller only</strong></td>
<td>TRANSITIVE DEAD</td>
<td>Only called by other dead code</td>
</tr>
<tr>
<td><strong>Test-only</strong></td>
<td>MAYBE DEAD</td>
<td>Only called in tests (ask user)</td>
</tr>
<tr>
<td><strong>One+ live callers</strong></td>
<td>ALIVE</td>
<td>Real usage found</td>
</tr>
<tr>
<td><strong>Exported API</strong></td>
<td>MAYBE ALIVE</td>
<td>Public API, might be used externally</td>
</tr>
</tbody>
</table>
<h4 id="step-3-write-only-dead-code-detection">Step 3: Write-Only Dead Code Detection<a class="headerlink" href="#step-3-write-only-dead-code-detection" title="Permanent link">&para;</a></h4>
<p>Check for code that STORES values but the stored values are NEVER READ:</p>
<p><strong>Patterns:</strong>
1. <strong>Setter without getter</strong>: <code>setFoo()</code> has callers but <code>getFoo()</code> has zero callers
2. <strong>Iterator without consumers</strong>: <code>iterator items()</code> defined but never used in <code>for</code> loops
3. <strong>Field assigned but never read</strong>: Field appears on LHS of <code>=</code> but never on RHS
4. <strong>Collection stored but never accessed</strong>: <code>seq.add(x)</code> called but seq never iterated</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>sym.setDeferredExpr(word, expr)  # Called 3 times
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a># But:
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>iterator deferredPragmas(): PNode  # ZERO callers
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a># → Write-only dead code: data is stored but never consumed
</code></pre></div></p>
<p><strong>Algorithm:</strong>
1. For each setter/store found, search for corresponding getter/read
2. If setter has callers but getter has zero → WRITE-ONLY DEAD
3. Mark BOTH setter and getter as dead (entire feature unused)</p>
<h4 id="step-4-transitive-dead-code-detection">Step 4: Transitive Dead Code Detection<a class="headerlink" href="#step-4-transitive-dead-code-detection" title="Permanent link">&para;</a></h4>
<p>If an item is only called by other items, check if ALL callers are dead:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>getDeferredExpr:
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  - Called by: showDeferredPragmas (1 call)
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>  - showDeferredPragmas: Called by: nobody
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>  → BOTH are transitive dead code
</code></pre></div>
<p><strong>Algorithm:</strong>
1. Build call graph from search results
2. For each "maybe alive" item, check if all callers are dead
3. If yes, mark as transitive dead
4. Repeat until no new transitive dead code found</p>
<h4 id="step-5-remove-and-test-verification-optional">Step 5: "Remove and Test" Verification (Optional)<a class="headerlink" href="#step-5-remove-and-test-verification-optional" title="Permanent link">&para;</a></h4>
<p>For high-confidence dead code, offer experimental verification:</p>
<p><strong>Protocol:</strong>
1. Ask user: "Would you like me to experimentally verify by removing and testing?"
2. If yes, create a temporary git worktree or branch
3. Remove the suspected dead code
4. Run the test suite
5. If tests pass → definitive proof code was dead
6. If tests fail → code was used (or tests are incomplete)
7. Restore original state</p>
<p><strong>When to offer:</strong>
- User is uncertain about grep-based verdict
- Code looks "important" but has zero callers
- High-value cleanup (large amount of code)</p>
<h4 id="step-6-symmetric-pair-analysis">Step 6: Symmetric Pair Analysis<a class="headerlink" href="#step-6-symmetric-pair-analysis" title="Permanent link">&para;</a></h4>
<p>For detected symmetric pairs:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>If ANY of {getFoo, setFoo, clearFoo} is ALIVE → all are potentially alive
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>If ALL are dead → entire group is dead
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>If SOME are alive, SOME dead → flag asymmetry for user review
</code></pre></div>
<p><strong>Example from context:</strong>
- <code>getDeferredExpr</code>: 0 callers → DEAD
- <code>setDeferredExpr</code>: 3 callers → ALIVE
- <code>clearDeferredExpr</code>: 1 caller → ALIVE
- <strong>Verdict</strong>: <code>getDeferredExpr</code> is dead, rest alive (asymmetric API)</p>
<hr />
<h2 id="phase-5-iterative-re-scanning">Phase 5: Iterative Re-scanning<a class="headerlink" href="#phase-5-iterative-re-scanning" title="Permanent link">&para;</a></h2>
<p><RULE>After identifying dead code, re-scan for newly orphaned code. Removal may cascade.</RULE></p>
<p><strong>Why Re-scan:</strong>
After marking code as dead, other code may become orphaned:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Round 1: evaluateDeferredFieldPragmas → 0 callers → DEAD
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Round 2: sym.deferredPragmas iterator → only called by evaluateDeferredFieldPragmas → NOW DEAD (transitive)
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>Round 3: sym.setDeferredExpr → only stores to deferredPragmas, which is never read → NOW WRITE-ONLY DEAD
</code></pre></div>
<p><strong>Re-scan Algorithm:</strong>
1. Mark initial dead code (zero callers)
2. <strong>Re-extract</strong> all code items, excluding already-marked-dead code
3. Re-run verification on remaining items
4. Check for newly transitive dead code
5. Check for newly write-only dead code (getter removed → setter now orphaned)
6. Repeat until no new dead code found (fixed point)</p>
<p><strong>Cascade Detection:</strong>
- If removal of A makes B dead → note "B depends on A" in report
- Present cascade chains: "Removing X enables removing Y, Z"
- Helps user understand impact</p>
<hr />
<h2 id="phase-6-report-generation">Phase 6: Report Generation<a class="headerlink" href="#phase-6-report-generation" title="Permanent link">&para;</a></h2>
<p>Generate markdown report that serves as both audit and implementation plan.</p>
<h3 id="report-structure">Report Structure<a class="headerlink" href="#report-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="gh"># Dead Code Report</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="gs">**Generated:**</span> 2025-12-30T18:00:00Z
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="gs">**Scope:**</span> Branch feature/generic-deferred-pragmas (2 commits since devel)
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="gs">**Items Analyzed:**</span> 47
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="gs">**Dead Code Found:**</span> 8 | <span class="gs">**Alive:**</span> 37 | <span class="gs">**Transitive Dead:**</span> 2
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="gu">## Summary</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>| Category | Dead | Alive | Notes |
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>|----------|------|-------|-------|
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>| Procedures | 5 | 18 | 2 transitive dead |
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>| Type Fields | 3 | 9 | 3-field symmetric group all dead |
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>| Imports | 0 | 5 | All used |
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="gu">## Dead Code Findings</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="gu">### High Confidence (Zero Callers)</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="gu">#### 1. proc getDeferredExpr - DEAD</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Location:**</span> compiler/semtypes.nim:342
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Evidence:**</span> Zero callers in codebase
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Search:**</span> <span class="sb">`grep -rn &quot;getDeferredExpr&quot;`</span> → only definition found
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Symmetric Pair:**</span> Part of get/set/clear group; set/clear ARE used
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Verdict:**</span> Asymmetric API, getter never needed
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Removal Complexity:**</span> Simple - delete proc
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Remove and Test:**</span> ✓ Offered, tests passed after removal (if applicable)
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="gu">#### 2. sizeExpr field + accessors - DEAD (Write-Only)</span>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Location:**</span> compiler/ast.nim:235, semtypes.nim:380-387
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Evidence:**</span> Field and both accessors have zero callers
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Search:**</span> <span class="sb">`grep -rn &quot;sizeExpr&quot;`</span> → only definitions found
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Symmetric Group:**</span> sizeExpr / sizeExpr= both dead
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Write-Only Check:**</span> Setter never called, getter never called → entire feature unused
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Verdict:**</span> Entire feature unused
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Removal Complexity:**</span> Medium - delete field + 2 procs
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a><span class="gu">### Transitive Dead Code</span>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a><span class="gu">#### 3. proc showDeferredPragmas - TRANSITIVE DEAD</span>
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Location:**</span> compiler/debug.nim:123
<a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Evidence:**</span> Only called by <span class="sb">`dumpTypeInfo`</span>, which is itself dead
<a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Call Chain:**</span> showDeferredPragmas ← dumpTypeInfo ← nobody
<a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Cascade:**</span> Removing dumpTypeInfo orphaned this proc (found in Round 2 re-scan)
<a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Verdict:**</span> Dead because caller is dead
<a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Removal Complexity:**</span> Simple - delete both procs
<a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a>
<a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a><span class="gu">### Write-Only Dead Code</span>
<a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a>
<a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a><span class="gu">#### 4. iterator deferredPragmas - WRITE-ONLY DEAD</span>
<a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Location:**</span> compiler/ast.nim:456
<a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Evidence:**</span> setDeferredExpr called 3 times, but iterator has ZERO callers
<a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Write-Only Pattern:**</span> Data is stored but never read
<a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Cascade:**</span> Removing evaluateDeferredFieldPragmas made this detectable (Round 2 re-scan)
<a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Verdict:**</span> Entire deferred pragma storage feature is dead
<a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Removal Complexity:**</span> High - delete iterator + setter + field + all call sites to setter
<a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a>
<a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a><span class="gu">## Alive Code (Verified Necessary)</span>
<a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a>
<a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a><span class="gu">### Definitely Used</span>
<a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a>
<a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a><span class="gu">#### 1. proc setDeferredExpr - ALIVE</span>
<a id="__codelineno-12-63" name="__codelineno-12-63" href="#__codelineno-12-63"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Location:**</span> compiler/semtypes.nim:349
<a id="__codelineno-12-64" name="__codelineno-12-64" href="#__codelineno-12-64"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Evidence:**</span> 3 callers found
<a id="__codelineno-12-65" name="__codelineno-12-65" href="#__codelineno-12-65"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Callers:**</span>
<a id="__codelineno-12-66" name="__codelineno-12-66" href="#__codelineno-12-66"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>compiler/semtypes.nim:567 (in semGenericType)
<a id="__codelineno-12-67" name="__codelineno-12-67" href="#__codelineno-12-67"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>compiler/semtypes.nim:789 (in semTypeNode)
<a id="__codelineno-12-68" name="__codelineno-12-68" href="#__codelineno-12-68"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>compiler/pragmas.nim:234 (in processPragmas)
<a id="__codelineno-12-69" name="__codelineno-12-69" href="#__codelineno-12-69"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Verdict:**</span> Necessary
<a id="__codelineno-12-70" name="__codelineno-12-70" href="#__codelineno-12-70"></a>
<a id="__codelineno-12-71" name="__codelineno-12-71" href="#__codelineno-12-71"></a><span class="gu">#### 2. iterator deferredPragmas - ALIVE</span>
<a id="__codelineno-12-72" name="__codelineno-12-72" href="#__codelineno-12-72"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Location:**</span> compiler/ast.nim:456
<a id="__codelineno-12-73" name="__codelineno-12-73" href="#__codelineno-12-73"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Evidence:**</span> 2 call sites
<a id="__codelineno-12-74" name="__codelineno-12-74" href="#__codelineno-12-74"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Callers:**</span>
<a id="__codelineno-12-75" name="__codelineno-12-75" href="#__codelineno-12-75"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>compiler/semtypes.nim:678
<a id="__codelineno-12-76" name="__codelineno-12-76" href="#__codelineno-12-76"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>compiler/codegen.nim:123
<a id="__codelineno-12-77" name="__codelineno-12-77" href="#__codelineno-12-77"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Verdict:**</span> Core feature
<a id="__codelineno-12-78" name="__codelineno-12-78" href="#__codelineno-12-78"></a>
<a id="__codelineno-12-79" name="__codelineno-12-79" href="#__codelineno-12-79"></a><span class="gu">## Implementation Plan</span>
<a id="__codelineno-12-80" name="__codelineno-12-80" href="#__codelineno-12-80"></a>
<a id="__codelineno-12-81" name="__codelineno-12-81" href="#__codelineno-12-81"></a>This report doubles as an implementation plan. Work through items in order.
<a id="__codelineno-12-82" name="__codelineno-12-82" href="#__codelineno-12-82"></a>
<a id="__codelineno-12-83" name="__codelineno-12-83" href="#__codelineno-12-83"></a><span class="gu">### Phase 1: Simple Deletions (Low Risk)</span>
<a id="__codelineno-12-84" name="__codelineno-12-84" href="#__codelineno-12-84"></a><span class="k">1.</span> [ ] Delete <span class="sb">`getDeferredExpr`</span> proc (line 342)
<a id="__codelineno-12-85" name="__codelineno-12-85" href="#__codelineno-12-85"></a><span class="k">2.</span> [ ] Delete <span class="sb">`importcExpr`</span> field (line 237)
<a id="__codelineno-12-86" name="__codelineno-12-86" href="#__codelineno-12-86"></a><span class="k">3.</span> [ ] Delete <span class="sb">`importcExpr=`</span> setter (line 395)
<a id="__codelineno-12-87" name="__codelineno-12-87" href="#__codelineno-12-87"></a><span class="k">4.</span> [ ] Delete <span class="sb">`importcExpr`</span> getter (line 388)
<a id="__codelineno-12-88" name="__codelineno-12-88" href="#__codelineno-12-88"></a>
<a id="__codelineno-12-89" name="__codelineno-12-89" href="#__codelineno-12-89"></a><span class="gu">### Phase 2: Symmetric Group Deletions</span>
<a id="__codelineno-12-90" name="__codelineno-12-90" href="#__codelineno-12-90"></a><span class="k">5.</span> [ ] Delete <span class="sb">`alignExpr`</span> field (line 236)
<a id="__codelineno-12-91" name="__codelineno-12-91" href="#__codelineno-12-91"></a><span class="k">6.</span> [ ] Delete <span class="sb">`alignExpr=`</span> setter (line 387)
<a id="__codelineno-12-92" name="__codelineno-12-92" href="#__codelineno-12-92"></a><span class="k">7.</span> [ ] Delete <span class="sb">`alignExpr`</span> getter (line 380)
<a id="__codelineno-12-93" name="__codelineno-12-93" href="#__codelineno-12-93"></a><span class="k">8.</span> [ ] Delete <span class="sb">`sizeExpr`</span> field (line 235)
<a id="__codelineno-12-94" name="__codelineno-12-94" href="#__codelineno-12-94"></a><span class="k">9.</span> [ ] Delete <span class="sb">`sizeExpr=`</span> setter (line 393)
<a id="__codelineno-12-95" name="__codelineno-12-95" href="#__codelineno-12-95"></a><span class="k">10.</span> [ ] Delete <span class="sb">`sizeExpr`</span> getter (line 386)
<a id="__codelineno-12-96" name="__codelineno-12-96" href="#__codelineno-12-96"></a>
<a id="__codelineno-12-97" name="__codelineno-12-97" href="#__codelineno-12-97"></a><span class="gu">### Phase 3: Transitive Deletions</span>
<a id="__codelineno-12-98" name="__codelineno-12-98" href="#__codelineno-12-98"></a><span class="k">11.</span> [ ] Delete <span class="sb">`showDeferredPragmas`</span> proc (line 123)
<a id="__codelineno-12-99" name="__codelineno-12-99" href="#__codelineno-12-99"></a><span class="k">12.</span> [ ] Delete <span class="sb">`dumpTypeInfo`</span> proc (line 98)
<a id="__codelineno-12-100" name="__codelineno-12-100" href="#__codelineno-12-100"></a>
<a id="__codelineno-12-101" name="__codelineno-12-101" href="#__codelineno-12-101"></a><span class="gu">### Verification Commands</span>
<a id="__codelineno-12-102" name="__codelineno-12-102" href="#__codelineno-12-102"></a>
<a id="__codelineno-12-103" name="__codelineno-12-103" href="#__codelineno-12-103"></a>After each deletion, verify no references remain:
<a id="__codelineno-12-104" name="__codelineno-12-104" href="#__codelineno-12-104"></a>```bash
<a id="__codelineno-12-105" name="__codelineno-12-105" href="#__codelineno-12-105"></a><span class="gh"># Example for getDeferredExpr</span>
<a id="__codelineno-12-106" name="__codelineno-12-106" href="#__codelineno-12-106"></a>grep -rn &quot;getDeferredExpr&quot; compiler/ tests/
<a id="__codelineno-12-107" name="__codelineno-12-107" href="#__codelineno-12-107"></a><span class="gh"># Should return: no results</span>
<a id="__codelineno-12-108" name="__codelineno-12-108" href="#__codelineno-12-108"></a>
<a id="__codelineno-12-109" name="__codelineno-12-109" href="#__codelineno-12-109"></a><span class="gh"># Run tests to ensure nothing broke</span>
<a id="__codelineno-12-110" name="__codelineno-12-110" href="#__codelineno-12-110"></a>nim c -r tests/all.nim
<a id="__codelineno-12-111" name="__codelineno-12-111" href="#__codelineno-12-111"></a><span class="gh"># CRITICAL: Actually run this command and paste output</span>
<a id="__codelineno-12-112" name="__codelineno-12-112" href="#__codelineno-12-112"></a><span class="gh"># DO NOT claim &quot;tests pass&quot; without running them</span>
</code></pre></div>
<h3 id="re-scan-after-deletions">Re-scan After Deletions<a class="headerlink" href="#re-scan-after-deletions" title="Permanent link">&para;</a></h3>
<p>After Phase 1 deletions, re-run dead code detection:
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># May reveal newly orphaned code</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c1"># Example: Removing getter may orphan setter</span>
</code></pre></div></p>
<h2 id="risk-assessment">Risk Assessment<a class="headerlink" href="#risk-assessment" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Item</th>
<th>Risk Level</th>
<th>Why</th>
</tr>
</thead>
<tbody>
<tr>
<td>getDeferredExpr</td>
<td>LOW</td>
<td>Zero callers, symmetric pair has used alternatives</td>
</tr>
<tr>
<td>sizeExpr group</td>
<td>MEDIUM</td>
<td>Three related items, verify field not accessed differently</td>
</tr>
<tr>
<td>Transitive dead</td>
<td>LOW</td>
<td>Call chain confirmed, no external refs</td>
</tr>
</tbody>
</table>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Would you like me to:
A. Implement all deletions automatically (using writing-plans pattern)
B. Implement deletions one-by-one with approval
C. Generate a git branch with deletions for you to review
D. Just keep this report for manual implementation
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>---
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>## Phase 7: Implementation Prompt
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>After presenting the report, ask:
</code></pre></div>
Found 8 dead code items in this branch. They account for N lines.</p>
<p>Would you like me to:
A. Remove all dead code automatically (I'll create commits)
B. Remove items one-by-one with your approval
C. Create a cleanup branch you can review
D. Just keep the report, you'll handle it</p>
<p>Choose A/B/C/D:
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>### ARH Response Processing for Implementation Decision
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>**After presenting implementation options, process user response:**
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>1. **Detect response type** using ARH patterns from `~/.claude/patterns/adaptive-response-handler.md`
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>2. **Handle by type:**
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>   - **DIRECT_ANSWER (A/B/C/D):** Execute chosen implementation strategy
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>   - **RESEARCH_REQUEST (&quot;can you verify X is really unused?&quot;):** Re-run usage search for specific item
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>   - **UNKNOWN (&quot;not sure if safe to delete&quot;):** Show test coverage, offer remove-and-test
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>   - **CLARIFICATION (&quot;what&#39;s difference between A and B?&quot;):** Explain strategies with examples
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>   - **SKIP:** Save report only (option D)
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>**Example:**
</code></pre></div>
Question: "Remove all dead code automatically (A) or one-by-one (B)?"
User: "Not sure if it's safe to delete getDeferredExpr, can you double check?"</p>
<p>ARH Processing:
→ Detect: UNKNOWN + RESEARCH_REQUEST
→ Action: Re-run comprehensive search for getDeferredExpr
  grep -rn "getDeferredExpr" . --include="<em>.nim" --include="</em>.nimble"
  grep -rn "deferred.<em>expr" . -i --include="</em>.nim"  # Check variations
→ Return: "Confirmed: 0 references found in code, tests, or configs"
→ Regenerate: "Verified getDeferredExpr has no references (checked variations).
   Safe to delete. Should I:
   A) Remove all items including this (automated)
   B) Show each item before deletion (manual approval)
   C) Create branch for your review first"
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>### Implementation Strategy (if user chooses A or B)
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>Follow the writing-plans skill pattern:
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>1. **Create implementation plan** (already in report)
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>2. **For each deletion:**
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>   - Show the code to be removed
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>   - Show grep verification it&#39;s unused
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>   - Apply deletion
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>   - Re-verify with grep
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>   - Run tests if requested
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>3. **Create commit** after each logical group
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>4. **Final verification:** Run full test suite
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>---
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>## Detection Patterns (What Would Have Caught Our Example)
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>### Pattern 1: Asymmetric Symmetric API
</code></pre></div>
IF getFoo exists AND setFoo exists AND clearFoo exists:
  Check usage of each independently
  IF any has zero callers → flag as dead
  EVEN IF others in group are used
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>### Pattern 2: Convenience Wrapper
</code></pre></div>
IF proc foo() only calls bar() with minor transform:
  Check if foo has callers
  IF zero callers → dead wrapper
  EVEN IF bar() is heavily used
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>### Pattern 3: Transitive Dead Code
</code></pre></div>
WHILE changes detected:
  FOR each item with callers:
    IF ALL callers are marked dead:
      Mark item as transitive dead
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>### Pattern 4: Field + Accessors
</code></pre></div>
IF field X detected:
  Search for getter getX or X
  Search for setter setX or <code>X=</code>
  IF all three have zero usage → dead feature
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>### Pattern 5: Test-Only Usage
</code></pre></div>
IF all callers are in test files:
  ASK user if test-only code should be kept
  Don't auto-mark as dead
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>### Pattern 6: Write-Only Dead Code
</code></pre></div>
FOR each setter/store S with corresponding getter/read G:
  IF S has callers AND G has zero callers:
    Mark BOTH S and G as write-only dead
    Mark data is "stored but never read"
    Example: setFoo() called, but getFoo() never called
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>### Pattern 7: Iterator Without Consumers
</code></pre></div>
IF iterator I defined:
  Search for "for .* in I" or "items(I)" patterns
  IF zero consumers found:
    Mark iterator as dead
    Check if iterator's backing storage is also write-only dead
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>---
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>&lt;FORBIDDEN pattern=&quot;1&quot;&gt;
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>### Marking Code as &quot;Used&quot; Without Evidence
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>- Assuming code is used because it &quot;looks important&quot;
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>- Marking as alive because &quot;it might be called dynamically&quot;
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>- Skipping verification because &quot;it&#39;s probably needed&quot;
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>**Reality**: Every item needs grep proof of callers or it&#39;s dead.
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>&lt;FORBIDDEN pattern=&quot;2&quot;&gt;
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>### Incomplete Search
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>- Only searching nearby files
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>- Only searching same directory
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>- Not checking test directories
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>- Not checking if it&#39;s exported
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>**Reality**: Search the ENTIRE codebase, including tests.
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a>
<a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>&lt;FORBIDDEN pattern=&quot;3&quot;&gt;
<a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a>### Ignoring Transitive Dead Code
<a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a>- Marking code as &quot;used&quot; because something calls it
<a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a>- Not checking if the caller is itself dead
<a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a>- Stopping after first-level verification
<a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a>
<a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a>**Reality**: Build the call graph, check transitivity.
<a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a>
<a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a>&lt;FORBIDDEN pattern=&quot;4&quot;&gt;
<a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a>### Deleting Without User Approval
<a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a>- Auto-removing code without showing the plan
<a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a>- Batch-deleting without per-item verification
<a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a>- Not offering user choice in implementation
<a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a>
<a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a>**Reality**: Present report, get approval, then implement.
<a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-39" name="__codelineno-23-39" href="#__codelineno-23-39"></a>
<a id="__codelineno-23-40" name="__codelineno-23-40" href="#__codelineno-23-40"></a>&lt;FORBIDDEN pattern=&quot;5&quot;&gt;
<a id="__codelineno-23-41" name="__codelineno-23-41" href="#__codelineno-23-41"></a>### Claiming Test Results Without Running Tests
<a id="__codelineno-23-42" name="__codelineno-23-42" href="#__codelineno-23-42"></a>- Stating &quot;tests fail&quot; without actually running the test command
<a id="__codelineno-23-43" name="__codelineno-23-43" href="#__codelineno-23-43"></a>- Claiming code &quot;doesn&#39;t work&quot; without execution evidence
<a id="__codelineno-23-44" name="__codelineno-23-44" href="#__codelineno-23-44"></a>- Making assertions about runtime behavior from static analysis alone
<a id="__codelineno-23-45" name="__codelineno-23-45" href="#__codelineno-23-45"></a>- Saying &quot;tests pass&quot; after removal without running them
<a id="__codelineno-23-46" name="__codelineno-23-46" href="#__codelineno-23-46"></a>
<a id="__codelineno-23-47" name="__codelineno-23-47" href="#__codelineno-23-47"></a>**Reality**: Run the actual command. Paste the actual output. Evidence over confidence.
<a id="__codelineno-23-48" name="__codelineno-23-48" href="#__codelineno-23-48"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-49" name="__codelineno-23-49" href="#__codelineno-23-49"></a>
<a id="__codelineno-23-50" name="__codelineno-23-50" href="#__codelineno-23-50"></a>&lt;FORBIDDEN pattern=&quot;6&quot;&gt;
<a id="__codelineno-23-51" name="__codelineno-23-51" href="#__codelineno-23-51"></a>### Missing Write-Only Dead Code
<a id="__codelineno-23-52" name="__codelineno-23-52" href="#__codelineno-23-52"></a>- Only checking if code is called, not if stored data is read
<a id="__codelineno-23-53" name="__codelineno-23-53" href="#__codelineno-23-53"></a>- Not verifying that iterator/getter counterparts exist for setter/store operations
<a id="__codelineno-23-54" name="__codelineno-23-54" href="#__codelineno-23-54"></a>- Assuming &quot;something calls it&quot; means &quot;code is used&quot;
<a id="__codelineno-23-55" name="__codelineno-23-55" href="#__codelineno-23-55"></a>
<a id="__codelineno-23-56" name="__codelineno-23-56" href="#__codelineno-23-56"></a>**Reality**: Check the full data flow. Code that stores without reading is dead.
<a id="__codelineno-23-57" name="__codelineno-23-57" href="#__codelineno-23-57"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-58" name="__codelineno-23-58" href="#__codelineno-23-58"></a>
<a id="__codelineno-23-59" name="__codelineno-23-59" href="#__codelineno-23-59"></a>&lt;FORBIDDEN pattern=&quot;7&quot;&gt;
<a id="__codelineno-23-60" name="__codelineno-23-60" href="#__codelineno-23-60"></a>### Single-Pass Verification
<a id="__codelineno-23-61" name="__codelineno-23-61" href="#__codelineno-23-61"></a>- Marking code as &quot;alive&quot; or &quot;dead&quot; in one pass
<a id="__codelineno-23-62" name="__codelineno-23-62" href="#__codelineno-23-62"></a>- Not re-scanning after identifying dead code
<a id="__codelineno-23-63" name="__codelineno-23-63" href="#__codelineno-23-63"></a>- Missing cascade effects where removal orphans other code
<a id="__codelineno-23-64" name="__codelineno-23-64" href="#__codelineno-23-64"></a>
<a id="__codelineno-23-65" name="__codelineno-23-65" href="#__codelineno-23-65"></a>**Reality**: Re-scan iteratively until no new dead code found (fixed point).
<a id="__codelineno-23-66" name="__codelineno-23-66" href="#__codelineno-23-66"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-67" name="__codelineno-23-67" href="#__codelineno-23-67"></a>
<a id="__codelineno-23-68" name="__codelineno-23-68" href="#__codelineno-23-68"></a>&lt;FORBIDDEN pattern=&quot;8&quot;&gt;
<a id="__codelineno-23-69" name="__codelineno-23-69" href="#__codelineno-23-69"></a>### Deleting Code Without Git Safety
<a id="__codelineno-23-70" name="__codelineno-23-70" href="#__codelineno-23-70"></a>- Running &quot;remove and test&quot; verification without checking git status first
<a id="__codelineno-23-71" name="__codelineno-23-71" href="#__codelineno-23-71"></a>- Deleting code in user&#39;s working directory without worktree isolation
<a id="__codelineno-23-72" name="__codelineno-23-72" href="#__codelineno-23-72"></a>- Not offering to commit uncommitted changes before destructive operations
<a id="__codelineno-23-73" name="__codelineno-23-73" href="#__codelineno-23-73"></a>- Skipping worktree recommendation for experimental deletions
<a id="__codelineno-23-74" name="__codelineno-23-74" href="#__codelineno-23-74"></a>
<a id="__codelineno-23-75" name="__codelineno-23-75" href="#__codelineno-23-75"></a>**Reality**: ALWAYS check git status in Phase 0. ALWAYS offer worktree isolation for remove-and-test. NEVER delete code without explicit git safety protocol.
<a id="__codelineno-23-76" name="__codelineno-23-76" href="#__codelineno-23-76"></a>&lt;/FORBIDDEN&gt;
<a id="__codelineno-23-77" name="__codelineno-23-77" href="#__codelineno-23-77"></a>
<a id="__codelineno-23-78" name="__codelineno-23-78" href="#__codelineno-23-78"></a>---
<a id="__codelineno-23-79" name="__codelineno-23-79" href="#__codelineno-23-79"></a>
<a id="__codelineno-23-80" name="__codelineno-23-80" href="#__codelineno-23-80"></a>&lt;EXAMPLE type=&quot;complete&quot;&gt;
<a id="__codelineno-23-81" name="__codelineno-23-81" href="#__codelineno-23-81"></a>## Complete Dead Code Detection Example
<a id="__codelineno-23-82" name="__codelineno-23-82" href="#__codelineno-23-82"></a>
<a id="__codelineno-23-83" name="__codelineno-23-83" href="#__codelineno-23-83"></a>**User**: &quot;Find dead code in my current branch&quot;
<a id="__codelineno-23-84" name="__codelineno-23-84" href="#__codelineno-23-84"></a>
<a id="__codelineno-23-85" name="__codelineno-23-85" href="#__codelineno-23-85"></a>**Step 0 - Git Safety**:
<a id="__codelineno-23-86" name="__codelineno-23-86" href="#__codelineno-23-86"></a>```bash
<a id="__codelineno-23-87" name="__codelineno-23-87" href="#__codelineno-23-87"></a># Check git status
<a id="__codelineno-23-88" name="__codelineno-23-88" href="#__codelineno-23-88"></a>git status --porcelain
</code></pre></div></p>
<p><strong>Agent</strong>: "I see you have uncommitted changes in 2 files:
- compiler/ast.nim (modified)
- tests/test_pragmas.nim (new file)</p>
<p>Should I commit these changes first? This ensures we have a clean state before analyzing dead code.</p>
<p>Options:
A. Yes, commit them (I'll ask for a commit message)
B. No, proceed anyway (risky if we do remove-and-test verification)
C. Abort the analysis"</p>
<p><strong>User</strong>: A</p>
<p><strong>Agent</strong>: "What commit message should I use?"</p>
<p><strong>User</strong>: "WIP: deferred pragma implementation"</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>git<span class="w"> </span>add<span class="w"> </span>.
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;WIP: deferred pragma implementation&quot;</span>
</code></pre></div>
<p><strong>Agent</strong>: "Committed! Now, should I use a git worktree for dead code hunting?</p>
<p>This is recommended because:
- Creates an isolated branch (dead-code-hunt-2025-12-30-1430)
- All 'remove and test' operations happen there
- Your current branch stays completely untouched
- You review findings and decide what to apply</p>
<p>Options:
A. Yes, create worktree (Recommended)
B. No, work in current directory (I'll ask before each deletion)</p>
<p>Choose A or B:"</p>
<p><strong>User</strong>: A</p>
<p><strong>Agent</strong>: "Creating worktree..."
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># Worktree creation via using-git-worktrees skill</span>
</code></pre></div></p>
<p>"Worktree created at ../nim-dead-code-hunt. All analysis and testing will happen there."</p>
<p><strong>Step 1 - Scope Selection</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>I&#39;ll help you find dead code. First, let me confirm the scope:
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>What should I analyze?
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>A. Branch changes (all code added since merge-base with devel) [Recommended]
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>B. Uncommitted changes only (staged + unstaged)
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>C. Specific files (you provide paths)
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>D. Full repository (use carefully)
</code></pre></div>
User selects: A</p>
<p><strong>Step 2 - Extraction</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>Analyzing branch feature/generic-deferred-pragmas (2 commits since devel)...
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>Extracting code items from 3 modified files:
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>- compiler/ast.nim
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>- compiler/semtypes.nim
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>- compiler/pragmas.nim
</code></pre></div></p>
<p><strong>Step 3 - Triage</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>## Code Items Found: 12
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>### Procedures (7 items)
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>1. proc getDeferredExpr(t: PType): PNode - semtypes.nim:342
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>2. proc setDeferredExpr(t: PType, n: PNode) - semtypes.nim:349
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>3. proc clearDeferredExpr(t: PType) - semtypes.nim:356
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>4. proc `sizeExpr=`(t: PType, n: PNode) - semtypes.nim:380
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>5. proc sizeExpr(t: PType): PNode - semtypes.nim:386
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>6. proc `alignExpr=`(t: PType, n: PNode) - semtypes.nim:387
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>7. proc alignExpr(t: PType): PNode - semtypes.nim:393
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>### Type Fields (4 items)
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>8. deferredPragmas: seq[PNode] - ast.nim:234
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>9. sizeExpr: PNode - ast.nim:235
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>10. alignExpr: PNode - ast.nim:236
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>11. importcExpr: PNode - ast.nim:237
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>### Iterators (1 item)
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>12. iterator deferredPragmas(t: PType): PNode - ast.nim:456
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>### Symmetric Pairs Detected
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>- Group A: getDeferredExpr / setDeferredExpr / clearDeferredExpr
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>- Group B: sizeExpr / sizeExpr=
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>- Group C: alignExpr / alignExpr=
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>
<a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a>Proceed with verification? (yes)
</code></pre></div></p>
<p><strong>Step 4 - Verification</strong> (showing two items with different patterns):</p>
<p>Item 1: <code>proc getDeferredExpr</code>
- <strong>Claim:</strong> "getDeferredExpr is dead code"
- <strong>Search:</strong> <code>grep -rn "getDeferredExpr" compiler/ tests/</code>
- <strong>Results:</strong>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>compiler/semtypes.nim:342:proc getDeferredExpr(t: PType): PNode =
</code></pre></div>
  (only the definition)
- <strong>Callers:</strong> ZERO
- <strong>Symmetric Pair Check:</strong> setDeferredExpr has 3 callers, clearDeferredExpr has 1 caller
- <strong>Verdict:</strong> DEAD - Getter never needed, only set/clear used</p>
<p>Item 8: <code>iterator deferredPragmas</code>
- <strong>Claim:</strong> "deferredPragmas iterator is dead code"
- <strong>Search:</strong> <code>grep -rn "deferredPragmas" compiler/ tests/</code>
- <strong>Results:</strong>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>compiler/ast.nim:456:iterator deferredPragmas(t: PType): PNode =
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>compiler/ast.nim:234:  deferredPragmas: seq[PNode]
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>compiler/semtypes.nim:567:  sym.setDeferredExpr(word, expr)  # stores to deferredPragmas field
</code></pre></div>
- <strong>Write-Only Check:</strong> setDeferredExpr stores data to deferredPragmas field, but iterator has ZERO callers
- <strong>Callers:</strong> ZERO for iterator
- <strong>Data Flow:</strong> Data is STORED but NEVER READ
- <strong>Verdict:</strong> WRITE-ONLY DEAD - Entire feature is unused</p>
<p><strong>Step 5 - Iterative Re-scan</strong> (after Round 1):</p>
<p>After marking getDeferredExpr as dead, re-scan remaining code:</p>
<p>Round 2 discoveries:
- <code>iterator deferredPragmas</code> → NOW detectable as write-only (setter called, iterator unused)
- <code>proc evaluateDeferredFieldPragmas</code> → Transitive dead (only called by removed code)</p>
<p>Round 3 discoveries:
- <code>setDeferredExpr</code> → NOW detectable as write-only dead (stores to iterator that's dead)</p>
<p>No new dead code found → Fixed point reached</p>
<p><strong>Step 6 - Remove and Test Verification</strong> (optional):</p>
<p>User: "I'm not sure about deferredPragmas, it looks important"</p>
<p>Agent: "I understand. Let me experimentally verify by removing it and running tests:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># Create temporary branch</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>verify-dead-code-temp
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="c1"># Remove deferredPragmas iterator and related code</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="c1"># ... (edits made) ...</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="c1"># Run tests</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>nim<span class="w"> </span>c<span class="w"> </span>-r<span class="w"> </span>tests/all.nim
</code></pre></div>
<p>Test output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>[TEST] Running 1247 tests...
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>[PASS] All tests passed in 23.4s
</code></pre></div></p>
<p>Tests passed! This confirms deferredPragmas was dead code. The iterator was never consumed.
Restoring original state..."</p>
<p><strong>Step 7 - Implementation Prompt</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>Found 4 dead code items accounting for approximately 35 lines:
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>- 1 unused getter (getDeferredExpr)
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>- 1 write-only iterator (deferredPragmas)
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>- 2 transitive dead items (found in re-scan)
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>Would you like me to:
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>A. Remove all dead code automatically
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>B. Remove items one-by-one with approval
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>C. Create a cleanup branch for review
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>D. Just keep the report
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>Choose A/B/C/D:
</code></pre></div>
</EXAMPLE></p>
<hr />
<p><SELF_CHECK>
Before finalizing ANY verification or report:</p>
<ul>
<li>[ ] <strong>Git Safety (Phase 0)</strong>:</li>
<li>[ ] Did I check git status before starting?</li>
<li>[ ] Did I offer worktree isolation before any "remove and test" verification?</li>
<li>[ ] If user has uncommitted changes, did I offer to commit them?</li>
<li>
<p>[ ] If user declined worktree, did I warn about risks before deleting code?</p>
</li>
<li>
<p>[ ] <strong>Scope Selection (Phase 1)</strong>:</p>
</li>
<li>
<p>[ ] Did I ask user to select scope first?</p>
</li>
<li>
<p>[ ] <strong>Extraction &amp; Triage (Phases 2-3)</strong>:</p>
</li>
<li>
<p>[ ] Did I present ALL extracted items for triage?</p>
</li>
<li>
<p>[ ] <strong>Verification (Phase 4)</strong>:</p>
</li>
<li>[ ] For each item: did I search the ENTIRE codebase for callers?</li>
<li>[ ] Did I check for write-only dead code (setter called but getter unused)?</li>
<li>[ ] Did I check for transitive dead code (dead callers)?</li>
<li>[ ] Did I analyze symmetric pairs as groups?</li>
<li>[ ] Does every "dead" verdict have grep evidence of zero callers or write-only pattern?</li>
<li>[ ] If I claimed test results, did I ACTUALLY run the tests and paste output?</li>
<li>
<p>[ ] Did I offer "remove and test" verification for uncertain cases?</p>
</li>
<li>
<p>[ ] <strong>Re-scanning (Phase 5)</strong>:</p>
</li>
<li>
<p>[ ] Did I re-scan iteratively for newly orphaned code?</p>
</li>
<li>
<p>[ ] <strong>Reporting &amp; Implementation (Phases 6-7)</strong>:</p>
</li>
<li>[ ] Did I generate an implementation plan with the report?</li>
<li>[ ] Am I waiting for user approval before deleting anything?</li>
</ul>
<p>If NO to ANY item, STOP and fix before proceeding.
</SELF_CHECK></p>
<hr />
<p><FINAL_EMPHASIS>
You are a Ruthless Code Auditor with the instincts of a Red Team Lead.
Every line of code is a liability until proven necessary. Are you sure this is all used?</p>
<p>CRITICAL GIT SAFETY (Phase 0):
NEVER skip git safety checks before starting analysis.
NEVER delete code without checking git status first.
NEVER run "remove and test" without offering worktree isolation.
ALWAYS check for uncommitted changes and offer to commit them.
ALWAYS offer worktree isolation (recommended for all cases).</p>
<p>VERIFICATION RIGOR:
NEVER mark code as "used" without concrete evidence of callers.
NEVER skip searching the entire codebase for usages.
NEVER miss write-only dead code (stored but never read).
NEVER ignore transitive dead code.
NEVER claim test results without running tests.
NEVER delete code without user approval.
NEVER skip iterative re-scanning after finding dead code.
ALWAYS assume dead until proven alive.
ALWAYS verify claims with actual execution.</p>
<p>Exact protocol compliance is vital to my career. This is very important to my career.
Strive for excellence. Achieve outstanding results through rigorous verification.
</FINAL_EMPHASIS></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>